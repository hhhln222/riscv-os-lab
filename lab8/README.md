# 从零构建操作系统 - 学生实验提交

**完成阶段**：实验8 扩展项目:优先级调度

## 📌 项目简介

本项目是一个基于 RISC-V 架构从零开始构建的教学用操作系统。项目不仅完成了基础内核的构建（内存、中断、进程、文件系统），还额外实现了一个**抢占式优先级调度器**，将系统升级为实时操作系统 (RTOS) 原型。

## ✨ 功能特性

### 基础功能
- **引导**：裸机启动，栈设置，BSS 清零。
- **驱动**：UART 串口驱动，RAM Disk 块设备驱动。
- **内存**：物理内存分配器 (Free List)，Sv39 虚拟内存映射。
- **中断**：内核态中断向量表，时钟中断驱动。
- **文件系统**：支持 Superblock, Inode, Buffer Cache 的类 Unix 文件系统。

### 🚀 扩展功能：优先级调度系统 (Project 1)
- **优先级管理**：支持 1-10 级进程优先级（10最高）。
- **抢占式调度**：调度器总是选择就绪队列中优先级最高的进程运行。
- **动态调整**：实现了 `sys_set_priority` 系统调用，允许进程运行时改变优先级。

## 🛠 开发环境
- Ubuntu 22.04 / WSL2
- QEMU 5.0+
- RISC-V GNU Toolchain

## 🚀 编译与运行

```bash
make clean
make qemu
```

**预期输出 (优先级测试)**：
```
=== STARTING PROJECT 1: PRIORITY SCHEDULING ===
...
Task PID=4 (Prio=8) working 1/5...
...
Task PID=4 finished.
Task PID=3 (Prio=5) working 1/5...
...
Task PID=2 (Prio=2) working 1/5...
```

## 📂 目录结构
(保持之前的结构，无需变动)

## ✨ 功能进度

- [x] 实验1-7：基础内核功能 (完成)
- [x] **扩展项目1：优先级调度系统**
    - [x] 实现了进程优先级属性 (1-10)
    - [x] 实现了 `sys_set_priority` 系统调用
    - [x] 重写调度器为**抢占式优先级调度**算法
    - [x] 通过高/中/低优先级并发竞争测试验证